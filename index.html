<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Stoskalkylator</title>
  <meta name="theme-color" content="#ffffff" />
  <link rel="icon" href="./icons/icon-192.png" />
  <link rel="apple-touch-icon" href="./icons/icon-192.png" />
  <link rel="stylesheet" href="./styles.css" />
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#ffffff">
</head>
<body>
  <header class="header">
    <h1>Stoskalkylator</h1>
    <nav class="tabs">
      <button class="tab-btn active" data-tab="stos">Stos</button>
      <button class="tab-btn" data-tab="kona">Kona</button>
    </nav>
  </header>

  <main id="app">
    <!-- Stos tab -->
    <section id="tab-stos" class="tab active">
      <div class="card">
        <h2>Stos (rörkapning i vinkel)</h2>
        <form id="stosForm">
          <div class="grid">
            <label for="stosDiameter">Stosdiameter (mm)</label>
            <input class="input" id="stosDiameter" type="number" placeholder="t.ex. 150" required />
            <label for="stosHeight">Stoshöjd kortaste (mm)</label>
            <input class="input" id="stosHeight" type="number" placeholder="t.ex. 300" required />
            <label for="stosSlope">Taklutning (°)</label>
            <input class="input" id="stosSlope" type="number" placeholder="t.ex. 24" required />
          </div>
          <button class="btn" type="submit" style="margin-top:12px">Beräkna</button>
        </form>
      </div>
      <section id="stosResult" class="card" style="display:none">
        <div class="meta" id="stosMeta"></div>
        <div id="stosPreview" class="preview"></div>
        <div class="actions">
          <button id="stosPrint" class="btn">Skriv ut</button>
          <button id="stosSvg" class="btn">Ladda ned SVG</button>
          <button id="stosPdf" class="btn">Ladda ned PDF (A4)</button>
        </div>
      </section>
    </section>

    <!-- Kona tab -->
    <section id="tab-kona" class="tab">
      <div class="card">
        <h2>Kona – halvmönster (Hmin = 30 mm)</h2>
        <form id="konaForm">
          <div class="grid">
            <label for="konaTop">Toppdiameter (mm)</label>
            <input class="input" id="konaTop" type="number" placeholder="t.ex. 110" required />
            <label for="konaBottom">Bottendiameter (mm)</label>
            <input class="input" id="konaBottom" type="number" placeholder="t.ex. 140" required />
            <label for="konaSlope">Taklutning (°)</label>
            <input class="input" id="konaSlope" type="number" placeholder="t.ex. 24" required />
          </div>
          <button class="btn" type="submit" style="margin-top:12px">Beräkna</button>
        </form>
      </div>
      <section id="konaResult" class="card" style="display:none">
        <div id="konaMeta" class="meta"></div>
        <div id="konaPreview" class="preview"></div>
        <div class="actions">
          <label>Rotation (°):
            <input type="range" id="konaRotSlider" min="0" max="359" step="1" value="0">
            <input type="number" id="konaRotInput" min="0" max="359" step="1" value="0" style="width:60px">
          </label>
        </div>
        <div class="actions">
          <button id="konaPrint" class="btn">Skriv ut</button>
          <button id="konaSvg" class="btn">Ladda ned SVG</button>
          <button id="konaPdf" class="btn">Ladda ned PDF (A4)</button>
        </div>
      </section>
    </section>
  </main>

  <footer class="footer">© CBH Bygg – Stoskalkylator</footer>

  <script>
  if ("serviceWorker" in navigator) {
    window.addEventListener("load", () => {
      navigator.serviceWorker.register("./service-worker.js");
    });
  }
  </script>
  <script src="./vendor/jspdf.umd.min.js"></script>
  <script src="./vendor/svg2pdf.umd.min.js"></script>
  <script defer src="./app.js"></script>
<script defer src="./kona.module.js"></script>

</body>
</html>
